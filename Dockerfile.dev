# syntax=docker/dockerfile:1
FROM rust:1-bookworm AS base

WORKDIR /workspace

# Common native deps (adjust as needed)
RUN apt-get update \
    && apt-get install -y --no-install-recommends \
       build-essential pkg-config libssl-dev ca-certificates curl git \
    && rm -rf /var/lib/apt/lists/*

# Optionally pre-build deps for faster iterative builds
# COPY Cargo.toml Cargo.lock ./
# RUN mkdir -p src && echo "fn main(){}" > src/main.rs \
#     && cargo build --release \
#     && rm -rf src

# Bring in your code
COPY . .

# Build command example:
# RUN cargo build --release

CMD ["bash"]
